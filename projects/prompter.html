<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Random Writing Prompt Generator</title>
  </head>
  <body>
    <h1>Random Writing Prompt Generator</h1>
    <p>Click the button to generate a new writing prompt:</p>
    <button onclick="generatePrompt()">Generate Prompt</button>
    <br><br>
    <div id="prompt"></div>
    
    <script>
      async function generatePrompt() {
        const response = await fetch('https://api.openai.com/v1/engine/davinci-codex/completions', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer YOUR_API_KEY' // Replace with your actual API key
          },
          body: JSON.stringify({
            'prompt': '1) A character that wants something\n2) But something prevents him from getting what he wants easily\n3) So he struggles against that force\n4) And either succeeds or fails\n',
            'temperature': 0.7,
            'max_tokens': 100,
            'top_p': 1,
            'frequency_penalty': 0,
            'presence_penalty': 0
          })
        });
        
        const { choices } = await response.json();
        const { text } = choices[0];
        document.getElementById('prompt').innerHTML = '<p>' + text + '</p>';
      }

      // Function to generate a new prompt when the device is shaken
      function handleShakeEvent() {
        generatePrompt();
      }

      // Event listener to detect device shaking
      if (typeof DeviceMotionEvent !== 'undefined') {
        window.addEventListener('devicemotion', function(event) {
          // Get the acceleration values from the event
          var acceleration = event.accelerationIncludingGravity;

          // Calculate the acceleration magnitude
          var magnitude = Math.sqrt(Math.pow(acceleration.x, 2) + Math.pow(acceleration.y, 2) + Math.pow(acceleration.z, 2));

          // If the magnitude is greater than a threshold (e.g., 25), consider it a shake
          if (magnitude > 25) {
            handleShakeEvent();
          }
        }, false);
      }
    </script>
  </body>
</html>
